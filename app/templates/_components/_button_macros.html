{# Common button macros, focused on PDF actions #}
{% macro render_pdf_button(href, label, btn_class='button-secondary', aria_label=None) %}
  <a href="{{ href }}"
     class="{{ btn_class }}"
     target="_blank"
     rel="noopener noreferrer"
     {% if aria_label %}aria-label="{{ aria_label }}"{% endif %}>
    {{ label }}
  </a>
{% endmacro %}

{# Page-aware PDF button renderer: renders nothing if page not supported #}
{% macro render_pdf_button_if_available(page, pdf_year) %}
  {% set exports = get_pdf_export_map() %}
  {% set config = exports.get(page) %}
  {% if config %}
    {{ render_pdf_button(url_for(config.endpoint, year=(pdf_year or default_pdf_year)|string),
                         'PDF出力（' ~ config.label ~ '・検証用）') }}
  {% endif %}
{% endmacro %}
