{% extends 'base.html' %}
{% from 'company/_form_helpers.html' import render_field, render_checkbox_field, render_toggle_switch %}

{% block title %}基本情報{% endblock %}

{% block sidebar %}
    {% include 'company/_wizard_sidebar.html' %}
{% endblock %}

{% block content %}
<h1 class="content-title">基本情報</h1>
<p class="content-subtitle">会社の基本的な情報を入力・編集します。</p>

<div class="card">
    <form method="post" novalidate class="ui-ctrl-44">
        {{ form.hidden_tag() }}
        <div class="form-grid">
            <fieldset>
                <legend>法人情報</legend>
                {{ render_field(form.corporate_number, id='corporate_number', placeholder='13桁の法人番号', autofocus=True) }}
{# TODO: 法人番号フィールドのblur時に /api/corp/resolve?number=XXXX を呼び、名称/住所候補を提示する（PR1b範囲外） #}
                {{ render_field(form.company_name, placeholder='株式会社 Gemini') }}
                {{ render_field(form.company_name_kana, placeholder='カブシキガイシャ ジェミニ') }}
            </fieldset>

            <fieldset>
                <legend>所在地</legend>
                {{ render_field(form.zip_code, id='zip_code', placeholder='1066126') }}
                {{ render_field(form.prefecture, id='prefecture', placeholder='東京都') }}
                {{ render_field(form.city, id='city', placeholder='港区') }}
                {{ render_field(form.address, id='address', placeholder='六本木6-10-1') }}
            </fieldset>

            <fieldset>
                <legend>連絡先</legend>
                {{ render_field(form.phone_number, placeholder='03-1234-5678') }}
                {{ render_field(form.homepage, placeholder='https://gemini.google.com') }}
            </fieldset>

            <fieldset>
                <legend>設立情報</legend>
                {{ render_field(form.establishment_date, class_='js-date') }}
                {{ render_field(form.industry_type, placeholder='情報通信業') }}
                {{ render_field(form.industry_code, placeholder='39') }}
                {{ render_field(form.reference_number, placeholder='整理番号') }}
            </fieldset>

            <fieldset class="full-width tax-confirmation-section">
                <legend>税制上の確認事項</legend>
                <p class="section-description">申告に必要な税制上の要件を満たしているかご確認ください。</p>

                <div class="confirmation-card">
                    <div class="card-content">
                        <div class="card-label">
                            <span class="label-text">定款上の会計期間が１年間ですか？</span>
                            <p class="label-description">定款上の会計期間が1年間でない場合は正しく計算できないため、ご利用いただけません。</p>
                        </div>
                        <div class="card-control">
                            {{ render_toggle_switch(form.capital_limit) }}
                        </div>
                    </div>
                </div>
                <div class="confirmation-card">
                    <div class="card-content">
                        <div class="card-label">
                            <span class="label-text">資本金または出資金の額が1億円以下の中小法人ですか？</span>
                            <p class="label-description">資本金等の金額が１億円超の場合正しく計算が行われないため、ご利用いただけません。</p>
                        </div>
                        <div class="card-control">
                            {{ render_toggle_switch(form.is_not_excluded_business) }}
                        </div>
                    </div>
                </div>
                <div class="confirmation-card">
                    <div class="card-content">
                        <div class="card-label">
                            <span class="label-text">電気・ガス供給業及び保険業に該当していませんか？</span>
                            <p class="label-description">電気・ガス供給業、保険業は対象外となります。</p>
                        </div>
                        <div class="card-control">
                            {{ render_toggle_switch(form.is_supported_industry) }}
                        </div>
                    </div>
                </div>
                <div class="confirmation-card">
                    <div class="card-content">
                        <div class="card-label">
                            <span class="label-text">適用除外事業者に該当していませんか？</span>
                            <p class="label-description">適用除外事業者とは、過去３年間平均の所得金額が１５億円超の法人をいいます。</p>
                        </div>
                        <div class="card-control">
                            {{ render_toggle_switch(form.is_excluded_business) }}
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="form-actions">
            {{ form.submit(class="button-primary") }}
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/address_autofill.js') }}"></script>
{% endblock %}
