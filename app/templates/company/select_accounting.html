{% extends "base.html" %}

{% block title %}会計データ選択{% endblock %}

{% block sidebar %}
    {# このページのサイドバーは、会計データ選択に関連するメニューを想定 #}
    <a href="#" class="active">会計データ選択</a>
    {# 他の関連メニューがあればここに追加 #}
{% endblock %}


{% block content %}
<div class="form-container">
    <h2>会計データ選択</h2>
    <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">データを表示したい会計期間を選択し、会計データファイルをアップロードしてください。</p>

    {# ▼▼▼▼▼ enctype="multipart/form-data" を必ず追加 ▼▼▼▼▼ #}
    <form method="POST" action="{{ url_for('company.select_accounting') }}" novalidate enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.accounting_year.label }}
            {{ form.accounting_year }}
            {% if form.accounting_year.errors %}
                <ul class="form-error">
                {% for error in form.accounting_year.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.accounting_period.label }}
            {# ラジオボタンを適切にスタイリングするためのコンテナ #}
            <div style="display: flex; gap: 20px;">
                {% for subfield in form.accounting_period %}
                <label class="inline-label">
                    {{ subfield }}
                    {{ subfield.label.text }}
                </label>
                {% endfor %}
            </div>
            {% if form.accounting_period.errors %}
                 <ul class="form-error">
                 {% for error in form.accounting_period.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        </div>
        
        <!-- ▼▼▼▼▼ ファイルアップロードフィールドのセクションを追加 ▼▼▼▼▼ -->
        <div class="form-group">
            {{ form.upload_file.label }}
            {{ form.upload_file }}
            {% if form.upload_file.errors %}
                <ul class="form-error">
                {% for error in form.upload_file.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        </div>
        <!-- ▲▲▲▲▲ ここまで追加 ▲▲▲▲▲ -->

        <div class="form-actions">
            <button type="submit" class="button-primary">データ取込開始</button>
        </div>
    </form>
</div>
{% endblock %}
