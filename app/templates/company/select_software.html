{% extends "base.html" %}

{% block title %}会計ソフトの選択 - {{ super() }}{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/select_software.css') }}">
{% endblock %}

{% block sidebar %}
    {% include 'company/_wizard_sidebar.html' %}
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>会計ソフトを選択</h1>
    <p>データのインポートを開始する前に、ご利用の会計ソフトを1つ選択してください。</p>
</div>

<div class="card">
    <form method="POST" novalidate x-data="{ selectedSoftware: '{{ form.accounting_software.data if form.accounting_software.data else '' }}' }">
        {{ form.hidden_tag() }}

        <div class="software-grid">
            {% for subfield in form.accounting_software %}
            <label class="software-card" :class="{ 'selected': selectedSoftware === '{{ subfield.data }}' }">
                {{ subfield(id=subfield.id, **{'x-model': 'selectedSoftware'}) }}
                <div class="software-card-content">
                    <span class="software-name">{{ subfield.label.text }}</span>
                </div>
            </label>
            {% endfor %}
        </div>

        <div class="form-actions">
            {% if has_mappings %}
                <a href="{{ url_for('company.manage_mappings') }}" class="button-secondary">登録済みの勘定科目マッピングを管理する</a>
            {% endif %}
            <button type="submit" class="button-primary" :disabled="!selectedSoftware">次へ進む</button>
        </div>
    </form>
</div>
{% endblock %}